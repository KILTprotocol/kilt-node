<!DOCTYPE html><html lang="en"><head><meta charset="utf-8"><meta name="viewport" content="width=device-width, initial-scale=1.0"><meta name="generator" content="rustdoc"><meta name="description" content="Decentralized Identity Provider (DIP) provider pallet"><title>pallet_dip_provider - Rust</title><link rel="preload" as="font" type="font/woff2" crossorigin href="../static.files/SourceSerif4-Regular-46f98efaafac5295.ttf.woff2"><link rel="preload" as="font" type="font/woff2" crossorigin href="../static.files/FiraSans-Regular-018c141bf0843ffd.woff2"><link rel="preload" as="font" type="font/woff2" crossorigin href="../static.files/FiraSans-Medium-8f9a781e4970d388.woff2"><link rel="preload" as="font" type="font/woff2" crossorigin href="../static.files/SourceCodePro-Regular-562dcc5011b6de7d.ttf.woff2"><link rel="preload" as="font" type="font/woff2" crossorigin href="../static.files/SourceSerif4-Bold-a2c9cd1067f8b328.ttf.woff2"><link rel="preload" as="font" type="font/woff2" crossorigin href="../static.files/SourceCodePro-Semibold-d899c5a5c4aeb14a.ttf.woff2"><link rel="stylesheet" href="../static.files/normalize-76eba96aa4d2e634.css"><link rel="stylesheet" href="../static.files/rustdoc-fa3bb1812debf86c.css"><meta name="rustdoc-vars" data-root-path="../" data-static-root-path="../static.files/" data-current-crate="pallet_dip_provider" data-themes="" data-resource-suffix="" data-rustdoc-version="1.74.0 (79e9716c9 2023-11-13)" data-channel="1.74.0" data-search-js="search-8be46b629f5f14a8.js" data-settings-js="settings-74424d7eec62a23e.js" ><script src="../static.files/storage-fec3eaa3851e447d.js"></script><script defer src="../crates.js"></script><script defer src="../static.files/main-c5bd66d33317d69f.js"></script><noscript><link rel="stylesheet" href="../static.files/noscript-5d8b3c7633ad77ba.css"></noscript><link rel="alternate icon" type="image/png" href="../static.files/favicon-16x16-8b506e7a72182f1c.png"><link rel="alternate icon" type="image/png" href="../static.files/favicon-32x32-422f7d1d52889060.png"><link rel="icon" type="image/svg+xml" href="../static.files/favicon-2c020d218678b618.svg"></head><body class="rustdoc mod crate"><!--[if lte IE 11]><div class="warning">This old browser is unsupported and will most likely display funky things.</div><![endif]--><nav class="mobile-topbar"><button class="sidebar-menu-toggle">&#9776;</button><a class="logo-container" href="../pallet_dip_provider/index.html"><img class="rust-logo" src="../static.files/rust-logo-151179464ae7ed46.svg" alt="logo"></a></nav><nav class="sidebar"><a class="logo-container" href="../pallet_dip_provider/index.html"><img class="rust-logo" src="../static.files/rust-logo-151179464ae7ed46.svg" alt="logo"></a><h2 class="location"><a href="#">Crate pallet_dip_provider</a></h2><div class="sidebar-elems"><ul class="block"><li class="version">Version 1.14.0-dev</li><li><a id="all-types" href="all.html">All Items</a></li></ul><section><ul class="block"><li><a href="#reexports">Re-exports</a></li><li><a href="#modules">Modules</a></li><li><a href="#traits">Traits</a></li></ul></section></div></nav><main><div class="width-limiter"><nav class="sub"><form class="search-form"><span></span><input class="search-input" name="search" aria-label="Run search in the documentation" autocomplete="off" spellcheck="false" placeholder="Click or press ‘S’ to search, ‘?’ for more options…" type="search"><div id="help-button" title="help" tabindex="-1"><a href="../help.html">?</a></div><div id="settings-menu" tabindex="-1"><a href="../settings.html" title="settings"><img width="22" height="22" alt="Change settings" src="../static.files/wheel-7b819b6101059cd0.svg"></a></div></form></nav><section id="main-content" class="content"><div class="main-heading"><h1>Crate <a class="mod" href="#">pallet_dip_provider</a><button id="copy-path" title="Copy item path to clipboard"><img src="../static.files/clipboard-7571035ce49a181d.svg" width="19" height="18" alt="Copy item path"></button></h1><span class="out-of-band"><a class="src" href="../src/pallet_dip_provider/lib.rs.html#19-252">source</a> · <button id="toggle-all-docs" title="collapse all docs">[<span>&#x2212;</span>]</button></span></div><details class="toggle top-doc" open><summary class="hideme"><span>Expand description</span></summary><div class="docblock"><h2 id="decentralized-identity-provider-dip-provider-pallet"><a href="#decentralized-identity-provider-dip-provider-pallet">Decentralized Identity Provider (DIP) provider pallet</a></h2>
<p>The Decentralized Identity Provider (DIP) provider pallet enables a Substrate-based chain (provider) to bridge the identities of its users to other connected chains (consumers) trustlessly.
A consumer chain is connected to a provider if there is a way for the consumer chain to verify proofs about parts of the state of the provider chain.</p>
<p>The pallet is agnostic over the chain-specific definition of identity and delegates the definition of it to the provider chain’s runtime.</p>
<p>Because providers and consumers evolve at different speeds, identity commitments are versioned.
This allows the provider chain to upgrade to a newer commitment scheme while allowing users to use the old version if the chains on which they want to use their identity don’t yet support the new scheme.</p>
<p>The identity subject can replace or remove identity commitments, for example, if something in the identity info changes.
After removal, the identity becomes unusable cross-chain, although it continues to exist on the provider chain and is usable for local operations.</p>
<h3 id="add-the-pallet-to-the-runtime"><a href="#add-the-pallet-to-the-runtime">Add the pallet to the runtime</a></h3>
<p>Add the pallet to runtime to the <code>Cargo.toml</code> file dependencies section:</p>
<div class="example-wrap"><pre class="language-toml"><code>provider = {package = &quot;pallet-dip-provider&quot;, git = &quot;https://github.com/KILTprotocol/kilt-node.git&quot;, branch = &quot;release-1.12.0&quot;}
</code></pre></div>
<p>The DIP pallet is available in the KILT node release 1.12.0 and later.</p>
<h3 id="configure-the-pallet"><a href="#configure-the-pallet">Configure the pallet</a></h3>
<p>Pass runtime configuration to the pallet’s <code>Config</code> trait.</p>

<div class="example-wrap ignore"><a href="#" class="tooltip" title="This example is not tested">ⓘ</a><pre class="rust rust-example-rendered"><code><span class="kw">impl </span>pallet_dip_provider::Config <span class="kw">for </span>Runtime {
    <span class="comment">// Config
</span>}</code></pre></div>
<h3 id="the-config-trait"><a href="#the-config-trait">The <code>Config</code> trait</a></h3>
<p>As the runtime is chain-agnostic, the <code>Config</code> trait requires the following configuration parameters passed to it:</p>
<ul>
<li><code>type CommitOriginCheck: EnsureOrigin&lt;Self::RuntimeOrigin, Success = Self::CommitOrigin&gt;</code>: The check ensures a given runtime origin is allowed to generate and remove identity commitments.</li>
<li><code>type CommitOrigin: SubmitterInfo&lt;Submitter = Self::AccountId&gt;</code>: The resulting origin if <code>CommitOriginCheck</code> returns without errors. The origin is not required to be an <code>AccountId</code>, but must include information about the <code>AccountId</code> of the tx submitter.</li>
<li><code>type Identifier: Parameter + MaxEncodedLen</code>: The type of an identifier used to retrieve identity information about a subject.</li>
<li><code>type IdentityCommitmentGenerator: IdentityCommitmentGenerator&lt;Self&gt;</code>: The type responsible for generating identity commitments, given the identity information associated with a given <code>Identifier</code>.</li>
<li><code>type IdentityProvider: IdentityProvider&lt;Self&gt;</code>: The type responsible for retrieving the information associated with a subject given their identifier. The information can potentially be retrieved from any source, using a combination of on-chain and off-chain solutions.</li>
<li><code>type IdentityProvider: IdentityProvider&lt;Self&gt;</code>: Customizable external logic to handle events in which a new identity commitment is generated or removed.</li>
<li><code>type RuntimeEvent: From&lt;Event&lt;Self&gt;&gt; + IsType&lt;&lt;Self as frame_system::Config&gt;::RuntimeEvent&gt;</code>: The aggregate <code>Event</code> type.</li>
</ul>
<h3 id="storage"><a href="#storage">Storage</a></h3>
<p>The pallet stores identity commitments, which are opaque byte blobs in the pallet storage and on which runtime developers can build the cross-chain identity bridging protocol.</p>
<p>The runtime must define what an identity commitment looks like and is provider-specific.
Runtime developers must make this definition available to consumers willing to integrate the identities on the provider chain.</p>
<p>The pallet currently contains a single storage element, the <code>IdentityCommitments</code> double map.
Its first key is the <code>Identifier</code> of subjects, while the second key is the commitment version.
The values are identity commitments.
The double map allows the same subject to have one commitment for each version supported by the provider, without forcing consumers to upgrade to a new version to support the latest commitment scheme.</p>
<h3 id="events"><a href="#events">Events</a></h3>
<p>The pallet generates two events:</p>
<ul>
<li><code>VersionedIdentityCommited</code> called whenever a new commitment is stored, and contains information about the <code>Identifier</code> of the subject, the value of the commitment, and the commitment version.</li>
<li><code>VersionedIdentityDeleted</code> called whenever a commitment is deleted, and contains information about the <code>Identifier</code> of the subject and the version of the commitment deleted.</li>
</ul>
<h3 id="calls"><a href="#calls">Calls</a></h3>
<p>Bullet points represent each call’s encoded index</p>
<ol start="0">
<li><code>pub fn commit_identity(origin: OriginFor&lt;T&gt;, identifier: T::Identifier, version: Option&lt;IdentityCommitmentVersion&gt; ) -&gt; DispatchResult</code>: Generate a new versioned commitment for the subject identified by the provided <code>Identifier</code>. If an old commitment for the same version is present, it is overridden. Hooks are called before the new commitment is stored, and optionally before the old one is replaced.</li>
<li><code>pub fn delete_identity_commitment(origin: OriginFor&lt;T&gt;, identifier: T::Identifier, version: Option&lt;IdentityCommitmentVersion&gt;) -&gt; DispatchResult</code>: Delete an identity commitment of a specific version for a specific <code>Identifier</code>. If a commitment of the provided version does not exist for the given Identifier, an error is returned. Hooks are called after the commitment has been removed.</li>
</ol>
</div></details><h2 id="reexports" class="small-section-header"><a href="#reexports">Re-exports</a></h2><ul class="item-table"><li><div class="item-name" id="reexport.DefaultIdentityCommitmentGenerator"><code>pub use crate::traits::<a class="struct" href="traits/identity_generation/struct.DefaultIdentityCommitmentGenerator.html" title="struct pallet_dip_provider::traits::identity_generation::DefaultIdentityCommitmentGenerator">DefaultIdentityCommitmentGenerator</a>;</code></div></li><li><div class="item-name" id="reexport.DefaultIdentityProvider"><code>pub use crate::traits::<a class="struct" href="traits/identity_provision/struct.DefaultIdentityProvider.html" title="struct pallet_dip_provider::traits::identity_provision::DefaultIdentityProvider">DefaultIdentityProvider</a>;</code></div></li><li><div class="item-name"><code>pub use crate::<a class="mod" href="pallet/index.html" title="mod pallet_dip_provider::pallet">pallet</a>::*;</code></div></li></ul><h2 id="modules" class="small-section-header"><a href="#modules">Modules</a></h2><ul class="item-table"><li><div class="item-name"><a class="mod" href="pallet/index.html" title="mod pallet_dip_provider::pallet">pallet</a></div><div class="desc docblock-short">The <code>pallet</code> module in each FRAME pallet hosts the most important items needed
to construct this pallet.</div></li><li><div class="item-name"><a class="mod" href="traits/index.html" title="mod pallet_dip_provider::traits">traits</a></div></li></ul><h2 id="traits" class="small-section-header"><a href="#traits">Traits</a></h2><ul class="item-table"><li><div class="item-name"><a class="trait" href="trait.WeightInfo.html" title="trait pallet_dip_provider::WeightInfo">WeightInfo</a></div><div class="desc docblock-short">Weight functions needed for pallet_dip_provider.</div></li></ul></section></div></main></body></html>